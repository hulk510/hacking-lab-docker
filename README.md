# hacking-lab-docker

vagrantでkaliを起動しようとするとなんでか知らんけどバグでaptでパッケージをインストールできないのでdockerでも動く環境を作る。

## コンテナのファイルをコピーする
たまにコンテナ内のファイルを修正したりするときあるので、それを次回コンテナ作成したときにも引き継げるようにマウント設定しないといけないけどその時にファイルをコピーしたほうが楽なのでやり方忘れそうなので書いとく。

```
docker cp {コンテナ名orコンテナID}:/etc/samba/smb.conf ./docker/kali/config/samba/smb.conf
```
でコピーできる。そんなに難しくはない。ホストからコンテナに逆にコピーできるみたい。
よく使いはしないけどたまに使いそう。

### 参考
[Dockerでホストとコンテナ間でのファイルコピー](https://qiita.com/gologo13/items/7e4e404af80377b48fd5)

### RFIできない

msfconsoleでリバースシェルの接続を待っててもtcpコネクションを確立できない。
多分dockerになってるせいでできてないんやと思う。

# xrdpの起動
installにkeyboard layoutを指定する必要があるみたいでdockerfileで書いてしまうとビルド止まる。
expectとか使えばいけるんかもしれないけどめんどくさい

xfceってデスクトップ環境を表示できるようにする奴も入れないといけないみたい。
多分ほんとかのやつは全部勝手に入ってるんかな？これを入れることでdesktop環境を表示できるっぽい。
